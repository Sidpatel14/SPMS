@model CitizenDashboardViewModel
@{
    ViewBag.Title = "Citizen Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row g-3 mb-4 text-center">
    <div class="col-md">
        <div class="card stat-card p-4 bg-white shadow-sm">
            <i class="fa fa-folder-open fa-2x text-primary mb-2"></i>
            <h6>Total Applications</h6>
            <h2 class="fw-bold">@Model.TotalApplications</h2>
        </div>
    </div>
    <div class="col-md">
        <div class="card stat-card p-4 bg-warning text-white shadow-sm">
            <i class="fa fa-upload fa-2x mb-2"></i>
            <h6>Submitted</h6>
            <h2 class="fw-bold">@Model.Submitted</h2>
        </div>
    </div>
    <div class="col-md">
        <div class="card stat-card p-4 bg-info text-white shadow-sm">
            <i class="fa fa-spinner fa-2x mb-2"></i>
            <h6>Under Review</h6>
            <h2 class="fw-bold">@Model.UnderReview</h2>
        </div>
    </div>
    <div class="col-md">
        <div class="card stat-card p-4 bg-success text-white shadow-sm">
            <i class="fa fa-check-circle fa-2x mb-2"></i>
            <h6>Approved</h6>
            <h2 class="fw-bold">@Model.Approved</h2>
        </div>
    </div>
    <div class="col-md">
        <div class="card stat-card p-4 bg-danger text-white shadow-sm">
            <i class="fa fa-times-circle fa-2x mb-2"></i>
            <h6>Rejected</h6>
            <h2 class="fw-bold">@Model.Rejected</h2>
        </div>
    </div>
</div>



<div class="card p-4">
    <h5 class="mb-3">Recent Applications</h5>
    <table class="table table-hover align-middle">
        <thead>
            <tr>
                <th>Application ID</th>
                <th>Permit Type</th>
                <th>Status</th>
                <th>Submitted On</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.LatestApplications != null && Model.LatestApplications.Any())
            {
                @foreach (var a in Model.LatestApplications)
                {
                    <tr>
                        <td>@a.ReferenceNumber</td>
                        <td>@a.PermitType</td>
                        @if (a.Status == "Submitted")
                        {
                            <td><span class="badge bg-warning">@a.Status</span></td>
                        }
                        else if (a.Status == "Under Review")
                        {
                            <td><span class="badge bg-info">@a.Status</span></td>
                        }
                        else if (a.Status == "Approved")
                        {
                            <td><span class="badge bg-success">@a.Status</span></td>
                        }
                        else if (a.Status == "Rejected")
                        {
                            <td><span class="badge bg-danger">@a.Status</span></td>
                        }
                        else
                        {
                            <td><span class="badge bg-light">@a.Status</span></td>
                        }
                        <td>@a.SubmissionDate.ToString("yyyy-MM-dd")</td>
                        <td>
                            <a href="@Url.Action("ApplicationDetail", "Citizen", new { id = a.ApplicationID })" class="btn btn-sm btn-primary">View</a></td>

                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="5" class="text-center text-muted py-4">
                        No applications found.
                    </td>
                </tr>
            }
        </tbody>

    </table>
</div>
